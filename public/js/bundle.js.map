{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap e1fd1142cce64332abe6","webpack:///./src/client/app.js","webpack:///./src/client/browser-enhancements.js","webpack:///./src/client/browser-polyfills.js","webpack:///./src/client/enrichers/browser/ajax-form-submit.js","webpack:///./src/client/enrichers/browser/embedded-browser-widget.js","webpack:///./src/client/enrichers/browser/path-page.js","webpack:///./src/client/enrichers/browser/path-runner.js","webpack:///./src/client/enrichers/browser/script-run-page.js","webpack:///./src/client/enrichers/browser/step-page.js","webpack:///./src/client/listeners/browser/metrics-sink.js","webpack:///./src/client/listeners/browser/notifications.js","webpack:///./~/events/events.js","webpack:///./src/client/browser.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","uuid","replace","r","Math","random","v","toString","app","ns","bus","_events2","notify","message","emit","_events","document","addEventListener","e","target","classList","contains","elements","querySelectorAll","getAttribute","forEach","ele","innerHTML","tagName","form","closest","originalAction","action","setTimeout","window","Element","matches","this","ownerDocument","el","length","item","parentElement","ajaxFormSubmit","ajaxSubmit","doc","slice","field","values","push","url","location","options","method","body","JSON","stringify","headers","Accept","Content-Type","fetch","then","response","ok","text","Error","status","redirectedToHTML","indexOf","href","json","catch","preventDefault","detail","embeddedBrowser","remote","js","timeout","frame","querySelector","Promise","resolve","reject","correlationId","isActive","receiveResponse","received","data","cid","removeListener","isDebug","args","concat","isSuccess","apply","on","contentWindow","postMessage","poll","interval","testScript","task","err","console","log","result","id","stopPropagation","src","type","origin","debug","dynamicArgs","keys","script","Function","dynamicArgValues","map","x","start","Date","now","end","outcome","warn","runPath","recordOutcome","html","transcript","stepScripts","nextStep","bookmark","steps","add","once","pathStepComplete","pathComplete","step","remove","path","createElement","description","appendChild","nextPath","paths","pathScripts","scriptComplete","stopper","checked","nextIterationURL","pathElement","recordMetric","metricType","parse","stack","metric","navigator","sendBeacon","displayNotification","isError","infoBlock","timeBlock","messageBlock","toLocaleDateString","className","displayErrorNotification","EventEmitter","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","er","handler","len","listeners","error","arguments","context","Array","addListener","listener","newListener","warned","trace","g","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","emitter","_app","_app2","_ajaxFormSubmit","_ajaxFormSubmit2","_stepPage","_stepPage2","_scriptRunPage","_scriptRunPage2","_embeddedBrowserWidget","_embeddedBrowserWidget2","_pathRunner","_pathRunner2","_pathPage","_pathPage2","_notifications","_notifications2","_metricsSink","_metricsSink2","formicido"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _events = __webpack_require__(11);\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction uuid() {\n\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0,\n            v = c == 'x' ? r : r & 0x3 | 0x8;return v.toString(16);\n    });\n}\n\nfunction app(ns) {\n\n    ns.bus = new _events2.default();\n    ns.uuid = uuid;\n    ns.notify = function (message) {\n        return ns.bus.emit(\"info-message\", message);\n    };\n}\nexports.default = app;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\ndocument.addEventListener(\"click\", function clearButton(e) {\n\n    if (!(e.target && e.target.classList.contains(\"clear-button\"))) {\n        return;\n    }\n    var elements = document.querySelectorAll(e.target.getAttribute(\"data-selectors\"));\n    elements.forEach(function (ele) {\n\n        if (ele.innerHTML) {\n            ele.innerHTML = \"\";\n        }\n        if (ele.value) {\n            ele.value = \"\";\n        }\n    });\n});\n\ndocument.addEventListener(\"click\", function redirectFormSubmission(e) {\n\n    if (e.target.tagName !== \"BUTTON\") {\n        return;\n    }\n    if (!e.target.classList.contains(\"redirect-form\")) {\n        return;\n    }\n    var form = e.target.closest(\"form\");\n    if (!form) {\n        return;\n    }\n    var originalAction = form.action;\n    form.action = e.target.value;\n    setTimeout(function () {\n\n        form.action = originalAction;\n    }, 100);\n});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\nif (window.Element && !window.Element.prototype.closest) {\n    window.Element.prototype.closest = function (s) {\n        var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n            i,\n            el = this;\n        do {\n            i = matches.length;\n            while (--i >= 0 && matches.item(i) !== el) {};\n        } while (i < 0 && (el = el.parentElement));\n        return el;\n    };\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = ajaxFormSubmit;\nfunction ajaxFormSubmit(ns) {\n    var bus = ns.bus;\n\n\n    function ajaxSubmit(form) {\n\n        var doc = {};\n        [].slice.call(form.elements, 0).forEach(function (field) {\n\n            var name = field.name;\n            if (name) {\n\n                var values = doc[name] = doc[name] || [];\n                values.push(field.value);\n            }\n        });\n        var url = form.action || window.location.toString();\n        var options = {\n\n            method: \"POST\",\n            body: JSON.stringify(doc),\n            headers: { \"Accept\": \"application/json\", \"Content-Type\": \"application/json\" }\n\n        };\n        window.fetch(url, options).then(function (response) {\n\n            if (response.ok) {\n\n                var redirectedToHTML = !!~response.headers.get(\"content-type\").indexOf(\"text/html\");\n                if (redirectedToHTML) {\n\n                    window.location.href = response.url;\n                } else {\n\n                    return response.json().then(function (json) {\n                        return bus.emit(\"fetch-result\", json);\n                    });\n                }\n            } else {\n\n                return response.text().then(function (text) {\n\n                    throw new Error(\"Fetch failed with \" + response.status + \": \" + text);\n                }, function (e) {\n\n                    throw new Error(\"Fetch failed with \" + response.status + \": \" + e.message);\n                });\n            }\n        }).catch(function (e) {\n            return bus.emit(\"fetch-error\", e.message);\n        });\n    }\n\n    document.addEventListener(\"submit\", function (e) {\n\n        if (!e.target.classList.contains(\"via-ajax\")) {\n            return;\n        }\n        e.preventDefault();\n        ajaxSubmit(e.target);\n    });\n    document.addEventListener(\"ajax-submit\", function (e) {\n        return ajaxSubmit(e.detail);\n    });\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = embeddedBrowser;\nfunction embeddedBrowser(ns) {\n    var bus = ns.bus,\n        uuid = ns.uuid,\n        notify = ns.notify;\n\n\n    document.addEventListener(\"submit\", function (e) {\n\n        if (e.target.id === \"embedded-browser-controls\") {\n\n            e.preventDefault();\n            e.stopPropagation();\n            var url = e.target.location.value;\n            document.querySelector(\"#embedded-browser\").src = url;\n        }\n    });\n\n    window.addEventListener(\"message\", function (e) {\n\n        if (!(e.data && e.data.args && e.data.type === \"agent-response\")) {\n            return;\n        }\n        var received = { origin: e.origin, data: e.data };\n        bus.emit(\"agent-response\", received);\n    });\n\n    var isDebug = false;\n\n    function remote(js, timeout) {\n\n        var frame = document.querySelector(\"#embedded-browser\");\n\n        return new Promise(function (resolve, reject) {\n\n            var correlationId = uuid();\n            var isActive = true;\n            var receiveResponse = function receiveResponse(received) {\n\n                if (!(received && received.data && received.data.cid === correlationId)) {\n                    return;\n                }\n                bus.removeListener(\"agent-response\", receiveResponse);\n                if (!isActive) {\n                    return;\n                }\n                isActive = false;\n                if (isDebug) {\n                    notify(\"Reply to: \" + correlationId);\n                }\n                var data = received.data;\n                var args = [].concat(data.args || []);\n                if (data.isSuccess) {\n\n                    resolve.apply(null, args);\n                } else {\n\n                    reject.apply(null, args);\n                }\n            };\n            bus.on(\"agent-response\", receiveResponse);\n            if (isDebug) {\n                notify(\"Remoting: \" + correlationId);\n            }\n            frame.contentWindow.postMessage({ cid: correlationId, js: js }, \"*\");\n            setTimeout(function () {\n\n                if (!isActive) {\n                    return;\n                }\n                isActive = false;\n                if (isDebug) {\n                    notify(\"Timed out: \" + correlationId);\n                }\n                bus.removeListener(\"agent-response\", receiveResponse);\n                reject(new Error(\"Timed out\"));\n            }, timeout || 5000);\n        });\n    }\n\n    function poll(interval, timeout, testScript) {\n\n        return new Promise(function (resolve, reject) {\n\n            var isActive = true;\n            function task() {\n\n                testScript().catch(function (err) {\n                    console.log(err);return false;\n                }).then(function (result) {\n\n                    if (!isActive) {\n                        return;\n                    }\n                    if (result) {\n\n                        resolve();\n                        isActive = false;\n                    } else {\n\n                        if (isDebug) {\n                            notify(\"Scheduling another poll\");\n                        }\n                        setTimeout(task, interval);\n                    }\n                });\n            }\n            setTimeout(task, interval);\n            setTimeout(function () {\n\n                if (!isActive) {\n                    return;\n                }\n                isActive = false;\n                reject(\"Polling timed out: \" + testScript);\n            }, timeout);\n        });\n    }\n\n    bus.on(\"run-step\", function (detail) {\n\n        isDebug = !!detail.debug;\n        var frame = document.querySelector(\"#embedded-browser\");\n        if (!frame) {\n\n            console.warn(\"No embedded browser\");\n        } else {\n\n            var dynamicArgs = Object.keys(detail.args || {});\n            var args = [\"frame\", \"remote\", \"poll\"].concat(dynamicArgs).concat(detail.script);\n            var script = Function.apply(null, args);\n            var dynamicArgValues = dynamicArgs.map(function (x) {\n                return detail.args[x];\n            });\n            var start = Date.now();\n            Promise.resolve().then(function () {\n                return script.apply(null, [frame, remote, poll].concat(dynamicArgValues));\n            }).then(function () {\n                return null;\n            }, function (err) {\n                return err;\n            }).then(function (err) {\n                return { detail: detail, err: err, start: start, end: Date.now() };\n            }).then(function (outcome) {\n                return bus.emit(\"step-complete\", outcome);\n            });\n        }\n    });\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus;\n\n    window.addEventListener(\"DOMContentLoaded\", function () {\n\n        if (!document.body.classList.contains(\"path-page\")) {\n            return;\n        }\n        bus.on(\"fetch-result\", function (detail) {\n\n            bus.emit(\"run-path\", detail);\n        });\n    });\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus,\n        notify = ns.notify;\n\n\n    function runPath(detail) {\n\n        var outcome = document.querySelector(\"#outcome\");\n        outcome.innerHTML = \"\";\n        function recordOutcome(html) {\n            if (outcome) {\n                outcome.innerHTML += \"<br />\" + html;\n            }\n        }\n        var transcript = document.querySelector(\"#transcript\");\n        transcript.innerHTML = \"\";\n\n        var stepScripts = detail.stepScripts;\n        var id = detail.id;\n\n        if (!(stepScripts && stepScripts.length)) {\n\n            recordOutcome(\"Done. No steps specified.\");\n            notify(\"No steps specified\");\n        } else {\n            var nextStep = function nextStep() {\n\n                if (bookmark < steps.length) {\n\n                    steps[bookmark].classList.add(\"running\");\n                    bus.once(\"step-complete\", pathStepComplete);\n                    bus.emit(\"run-step\", stepScripts[bookmark]);\n                    bookmark++;\n                } else {\n\n                    pathComplete();\n                }\n            };\n\n            var pathStepComplete = function pathStepComplete(detail) {\n\n                var step = steps[bookmark - 1];\n                step.classList.remove(\"running\");\n                if (detail.err) {\n\n                    recordOutcome(\"Step \" + bookmark + \" error: \" + detail.err);\n                    step.classList.add(\"error\");\n                } else {\n\n                    step.classList.add(\"success\");\n                }\n                nextStep();\n            };\n\n            var pathComplete = function pathComplete() {\n\n                var end = Date.now();\n                var outcome = { path: stepScripts, id: id, start: start, end: end };\n                notify(\"Path run complete\");\n                bus.emit(\"path-complete\", outcome);\n            };\n\n            var steps = stepScripts.map(function (x) {\n\n                var s = document.createElement(\"li\");\n                s.innerHTML = x.description;\n                transcript.appendChild(s);\n                return s;\n            });\n\n            var bookmark = 0;\n\n\n            var start = Date.now();\n            nextStep();\n        }\n    }\n    bus.on(\"run-path\", runPath);\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus,\n        notify = ns.notify;\n\n\n    bus.on(\"initiate-script\", function (script) {\n        var pathScripts = script.pathScripts,\n            nextIterationURL = script.nextIterationURL;\n\n\n        var outcome = document.querySelector(\"#script-outcome\");\n        outcome.innerHTML = \"\";\n        function recordOutcome(html) {\n            if (outcome) {\n                outcome.innerHTML += \"<br />\" + html;\n            }\n        }\n\n        var transcript = document.querySelector(\"#script-transcript\");\n        var bookmark = 0;\n        var paths = pathScripts.map(function (x) {\n\n            var pathElement = document.createElement(\"li\");\n            pathElement.innerHTML = x.name;\n            transcript.appendChild(pathElement);\n            return pathElement;\n        });\n\n        function nextPath() {\n\n            if (bookmark < paths.length) {\n\n                paths[bookmark].classList.add(\"running\");\n                bus.emit(\"run-path\", pathScripts[bookmark]);\n                bookmark++;\n            } else {\n\n                scriptComplete();\n            }\n        }\n\n        function pathComplete(detail) {\n\n            var path = paths[bookmark - 1];\n            path.classList.remove(\"running\");\n            if (detail.err) {\n\n                recordOutcome(\"path \" + bookmark + \" error: \" + detail.err);\n                path.classList.add(\"error\");\n            } else {\n\n                path.classList.add(\"success\");\n            }\n            setTimeout(nextPath, 1000);\n        }\n\n        function scriptComplete() {\n\n            bus.removeListener(\"path-complete\", pathComplete);\n            script.end = Date.now();\n            bus.emit(\"script-complete\", script);\n            notify(\"Script run complete\");\n            var stopper = document.querySelector(\"#stop\");\n            if (!stopper.checked) {\n\n                window.location.replace(nextIterationURL);\n            } else {\n\n                document.body.classList.add(\"paused\");\n            }\n        }\n\n        if (paths.length < 1) {\n\n            recordOutcome(\"No paths to run\");\n        } else {\n\n            script.start = Date.now();\n            bus.on(\"path-complete\", pathComplete);\n            nextPath();\n        }\n    });\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus;\n\n    window.addEventListener(\"DOMContentLoaded\", function () {\n\n        if (!document.body.classList.contains(\"step-page\")) {\n            return;\n        }\n        bus.on(\"fetch-result\", function (detail) {\n\n            document.querySelector(\"#code\").innerHTML = detail.script;\n            document.querySelector(\"#outcome\").innerHTML = \"Running...\";\n            bus.emit(\"run-step\", detail);\n        });\n\n        bus.on(\"step-complete\", function (detail) {\n\n            document.querySelector(\"#outcome\").innerHTML = \"Complete.\";\n            if (detail.err) {\n\n                document.querySelector(\"#outcome\").innerHTML += \" \" + detail.err;\n            }\n        });\n    });\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus;\n\n    var recordMetric = function recordMetric(metricType) {\n        return function (detail) {\n\n            detail = JSON.parse(JSON.stringify(detail));\n            if (detail.err) {\n                detail.err = detail.err.stack;\n            }\n            var metric = { type: metricType, detail: detail };\n            window.navigator.sendBeacon(\"/metrics\", JSON.stringify(metric));\n        };\n    };\n    bus.on(\"step-complete\", recordMetric(\"step\"));\n    bus.on(\"path-complete\", recordMetric(\"path\"));\n    bus.on(\"script-complete\", recordMetric(\"script\"));\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (ns) {\n    var bus = ns.bus;\n\n    bus.on(\"fetch-error\", displayErrorNotification);\n    bus.on(\"agent-error\", displayErrorNotification);\n    bus.on(\"info-message\", displayNotification);\n};\n\nfunction displayNotification(message, isError) {\n\n    var infoBlock = document.createElement(\"li\");\n    var timeBlock = document.createElement(\"time\");\n    var messageBlock = document.createElement(\"div\");\n\n    messageBlock.innerHTML = message;\n    timeBlock.innerHTML = new Date().toLocaleDateString();\n    infoBlock.className = isError ? \"error\" : \"\";\n    infoBlock.appendChild(timeBlock);\n    infoBlock.appendChild(messageBlock);\n    infoBlock.classList.add(\"goes\");\n    document.querySelector(\".infos\").appendChild(infoBlock);\n    setTimeout(function () {\n\n        infoBlock.classList.add(\"going\");\n        setTimeout(function () {\n            return infoBlock.remove();\n        }, 500);\n    }, 5000);\n}\n\nfunction displayErrorNotification(message) {\n\n    displayNotification(message.stack || message, true);\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(2);\n\n__webpack_require__(1);\n\nvar _app = __webpack_require__(0);\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _ajaxFormSubmit = __webpack_require__(3);\n\nvar _ajaxFormSubmit2 = _interopRequireDefault(_ajaxFormSubmit);\n\nvar _stepPage = __webpack_require__(8);\n\nvar _stepPage2 = _interopRequireDefault(_stepPage);\n\nvar _scriptRunPage = __webpack_require__(7);\n\nvar _scriptRunPage2 = _interopRequireDefault(_scriptRunPage);\n\nvar _embeddedBrowserWidget = __webpack_require__(4);\n\nvar _embeddedBrowserWidget2 = _interopRequireDefault(_embeddedBrowserWidget);\n\nvar _pathRunner = __webpack_require__(6);\n\nvar _pathRunner2 = _interopRequireDefault(_pathRunner);\n\nvar _pathPage = __webpack_require__(5);\n\nvar _pathPage2 = _interopRequireDefault(_pathPage);\n\nvar _notifications = __webpack_require__(10);\n\nvar _notifications2 = _interopRequireDefault(_notifications);\n\nvar _metricsSink = __webpack_require__(9);\n\nvar _metricsSink2 = _interopRequireDefault(_metricsSink);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ns = window.formicido = window.formicido || {};\n\n[_app2.default, // must be first\n_notifications2.default, _metricsSink2.default, _ajaxFormSubmit2.default, _embeddedBrowserWidget2.default, _stepPage2.default, _scriptRunPage2.default, _pathPage2.default, _pathRunner2.default].forEach(function (module) {\n    return module(ns);\n});\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e1fd1142cce64332abe6","import EventEmitter from \"events\";\n\n\nfunction uuid() {\n        \n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {var r = Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);});\n\n}\n    \nfunction app( ns ) {\n    \n    ns.bus = new EventEmitter();\n    ns.uuid = uuid;\n    ns.notify = message => ns.bus.emit( \"info-message\", message );\n    \n}\nexport default app;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app.js","document.addEventListener( \"click\", function clearButton( e ) {\n    \n    if ( !( e.target && e.target.classList.contains( \"clear-button\" ) ) ) { return; }\n    var elements = document.querySelectorAll( e.target.getAttribute( \"data-selectors\" ) );\n    elements.forEach( ele => {\n        \n        if ( ele.innerHTML ) { ele.innerHTML = \"\"; }\n        if ( ele.value ) { ele.value = \"\"; }\n        \n    } );\n        \n} );\n\ndocument.addEventListener( \"click\", function redirectFormSubmission( e ) {\n        \n    if ( e.target.tagName !== \"BUTTON\" ) { return; }\n    if ( !e.target.classList.contains( \"redirect-form\" ) ) { return; }\n    var form = e.target.closest( \"form\" );\n    if ( !form ) { return; }\n    var originalAction = form.action;\n    form.action = e.target.value;\n    setTimeout( function() {\n        \n        form.action = originalAction;\n        \n    }, 100 );\n\n} );\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/browser-enhancements.js","// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\nif (window.Element && !window.Element.prototype.closest) {\nwindow.Element.prototype.closest = \n    function(s) {\n        var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n            i,\n            el = this;\n        do {\n            i = matches.length;\n            while (--i >= 0 && matches.item(i) !== el) {};\n        } while ((i < 0) && (el = el.parentElement)); \n        return el;\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/browser-polyfills.js","export default function ajaxFormSubmit( ns ) {\n    \n    const { bus } = ns;\n    \n    function ajaxSubmit( form ) {\n        \n        const doc = {};\n        [].slice.call( form.elements, 0 ).forEach( field => {\n    \n            const name = field.name;\n            if ( name ) {\n                \n                const values = doc[ name ] = doc[ name ] || [];\n                values.push( field.value );\n                \n             }\n            \n        } );\n        const url = form.action || window.location.toString();\n        const options = {\n            \n            method: \"POST\", \n            body: JSON.stringify( doc ),\n            headers: { \"Accept\": \"application/json\", \"Content-Type\": \"application/json\" }\n            \n        };\n        window.fetch( url, options ).then( response => {\n    \n            if ( response.ok) { \n    \n                var redirectedToHTML = !!~response.headers.get( \"content-type\" ).indexOf( \"text/html\" );\n                if ( redirectedToHTML ) {\n    \n                    window.location.href = response.url;\n                    \n                } else {\n                    \n                    return response.json().then( json => bus.emit( \"fetch-result\", json ) );\n    \n                }\n            \n            } else {\n            \n                return response.text().then( text => {\n               \n                   throw new Error( \"Fetch failed with \" + response.status + \": \" + text ); \n               \n                }, e => {\n                \n                    throw new Error( \"Fetch failed with \" + response.status + \": \" + e.message );\n                \n                } );\n    \n            }\n    \n        } )\n        .catch( e => bus.emit( \"fetch-error\", e.message ) );\n\n    }\n\n    document.addEventListener( \"submit\", e => {\n\n        if ( !e.target.classList.contains( \"via-ajax\" ) ) { return; }\n        e.preventDefault();    \n        ajaxSubmit( e.target );\n        \n    \n    } );\n    document.addEventListener( \"ajax-submit\", e => ajaxSubmit( e.detail ) );\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/ajax-form-submit.js","export default function embeddedBrowser( ns ) {\n    \n    const { bus, uuid, notify } = ns;\n    \n    document.addEventListener( \"submit\", function( e ) {\n    \n        if ( e.target.id === \"embedded-browser-controls\" ) {\n        \n            e.preventDefault();\n            e.stopPropagation();\n            var url = e.target.location.value;\n            document.querySelector( \"#embedded-browser\" ).src = url;\n            \n        }\n        \n    } );\n   \n    window.addEventListener( \"message\", e => {\n\n        if ( !( e.data && e.data.args && e.data.type === \"agent-response\" ) ) { return; }\n        var received = { origin: e.origin, data: e.data };\n        bus.emit( \"agent-response\", received );\n\n    } );\n    \n    var isDebug = false;\n    \n    function remote( js, timeout ) {\n    \n        var frame = document.querySelector( \"#embedded-browser\" );\n        \n        return new Promise( ( resolve, reject ) => {\n\n            var correlationId = uuid();\n            var isActive = true;\n            const receiveResponse = received => {\n\n                if ( !( received && received.data && received.data.cid === correlationId ) ) { return; }\n                bus.removeListener( \"agent-response\", receiveResponse );\n                if ( !isActive ) { return; }\n                isActive = false;\n                if ( isDebug ) { notify( \"Reply to: \" + correlationId ); }\n                var data = received.data;\n                var args = [].concat( data.args || [] );\n                if ( data.isSuccess ) {\n                    \n                    resolve.apply( null, args );\n                    \n                } else {\n                    \n                    reject.apply( null, args );\n                    \n                }\n\n            };\n            bus.on( \"agent-response\", receiveResponse );\n            if ( isDebug ) { notify( \"Remoting: \" + correlationId ); }\n            frame.contentWindow.postMessage( { cid: correlationId, js: js }, \"*\" );\n            setTimeout( function() {\n                \n                if ( !isActive ) { return; }\n                isActive = false;\n                if ( isDebug ) { notify( \"Timed out: \" + correlationId ); }\n                bus.removeListener( \"agent-response\", receiveResponse );\n                reject( new Error( \"Timed out\" ) );\n                \n            }, timeout || 5000 );\n            \n        } );\n        \n    }\n            \n            \n    function poll( interval, timeout, testScript ) {\n        \n        return new Promise( ( resolve, reject ) => {\n            \n            var isActive = true;\n            function task() {\n                   \n                testScript()\n                    .catch( err => { console.log( err ); return false; } )\n                    .then( result => {\n                        \n                        if ( !isActive ) { return; }\n                        if ( result ) { \n                            \n                            resolve();\n                            isActive = false;\n                            \n                        } else {\n                            \n                            if ( isDebug ) { notify( \"Scheduling another poll\" ); }\n                            setTimeout( task, interval );\n                            \n                        }\n                            \n                    } );\n                \n            }\n            setTimeout( task, interval );\n            setTimeout( function() {\n                \n                if ( !isActive ) { return; }\n                isActive = false;\n                reject( \"Polling timed out: \" + testScript );\n                \n            }, timeout );\n\n        } );\n        \n    }\n    \n    bus.on( \"run-step\", detail => {\n        \n        isDebug = !!detail.debug;\n        var frame = document.querySelector( \"#embedded-browser\" );\n        if ( !frame ) {\n            \n            console.warn( \"No embedded browser\" );\n            \n        } else {\n            \n            var dynamicArgs = Object.keys( detail.args || {} );\n            var args = [ \"frame\", \"remote\", \"poll\" ].concat( dynamicArgs ).concat( detail.script );\n            var script = Function.apply( null, args );\n            var dynamicArgValues = dynamicArgs.map( x => detail.args[ x ] );\n            var start = Date.now();\n            Promise.resolve()\n                .then( () => script.apply( null, [ frame, remote, poll ].concat( dynamicArgValues ) ) )\n                .then( () => null, err => err )\n                .then( err => ( { detail, err, start, end: Date.now() } ) )\n                .then( outcome => bus.emit( \"step-complete\", outcome ) );\n\n        }\n        \n    } );\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/embedded-browser-widget.js","export default function( ns ) {\n    \n    const { bus } = ns;\n    window.addEventListener( \"DOMContentLoaded\", () => {\n\n        if ( !document.body.classList.contains( \"path-page\" ) ) { return; }        \n        bus.on( \"fetch-result\", function( detail ) {\n        \n            bus.emit( \"run-path\", detail );\n\n        } );    \n        \n    } );\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/path-page.js","export default function( ns ) {\n\n    const { bus, notify } = ns;\n\n    function runPath( detail ) {\n\n        var outcome = document.querySelector( \"#outcome\" );\n        outcome.innerHTML = \"\";\n        function recordOutcome( html ) { if ( outcome ) { outcome.innerHTML += \"<br />\" + html; } }\n        var transcript = document.querySelector( \"#transcript\" );\n        transcript.innerHTML = \"\";\n\n        var stepScripts = detail.stepScripts;\n        var id = detail.id;\n        \n        if ( !( stepScripts && stepScripts.length ) ) { \n            \n            recordOutcome( \"Done. No steps specified.\" );\n            notify( \"No steps specified\" );\n            \n        } else {\n        \n            var steps = stepScripts.map( x => {\n                \n                var s = document.createElement( \"li\" );\n                s.innerHTML = x.description;\n                transcript.appendChild( s );\n                return s;\n                \n            } );\n            \n            var bookmark = 0;\n            function nextStep() {\n                \n                if ( bookmark < steps.length ) { \n\n                    \n                    steps[ bookmark ].classList.add( \"running\" );\n                    bus.once( \"step-complete\", pathStepComplete );\n                    bus.emit( \"run-step\", stepScripts[ bookmark ] );\n                    bookmark++;\n                \n                } else {\n                    \n                    pathComplete();\n                    \n                }\n                    \n            }\n            \n            function pathStepComplete( detail ) {\n\n                var step = steps[ bookmark - 1 ];\n                step.classList.remove( \"running\" );\n                if ( detail.err ) {\n\n                    recordOutcome( \"Step \" + bookmark + \" error: \" + detail.err );\n                    step.classList.add( \"error\" );\n                    \n                } else {\n                    \n                    step.classList.add( \"success\" );\n                    \n                }\n                nextStep();\n                \n            }\n        \n            var start = Date.now();   \n            nextStep();\n\n            function pathComplete() {\n                \n                var end = Date.now();\n                var outcome = { path: stepScripts, id: id, start: start, end: end };\n                notify( \"Path run complete\" );\n                bus.emit( \"path-complete\", outcome );\n\n            }\n        \n        }\n    \n    }\n    bus.on( \"run-path\", runPath );\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/path-runner.js","export default function( ns ) {\n    \n    const { bus, notify } = ns;\n\n    bus.on( \"initiate-script\", function( script ) {\n\n        const { pathScripts, nextIterationURL } = script;\n        \n        var outcome = document.querySelector( \"#script-outcome\" );\n        outcome.innerHTML = \"\";\n        function recordOutcome( html ) { if ( outcome ) { outcome.innerHTML += \"<br />\" + html; } }\n        \n        var transcript = document.querySelector( \"#script-transcript\" );\n        var bookmark = 0;\n        var paths = pathScripts.map( x => {\n        \n            var pathElement = document.createElement( \"li\" );\n            pathElement.innerHTML = x.name;\n            transcript.appendChild( pathElement );\n            return pathElement;\n        \n        } );\n    \n        function nextPath() {\n            \n            if ( bookmark < paths.length ) { \n                \n                paths[ bookmark ].classList.add( \"running\" );\n                bus.emit( \"run-path\", pathScripts[ bookmark ] );\n                bookmark++;\n            \n            } else {\n                \n                scriptComplete();\n                \n            }\n                \n        }\n    \n        function pathComplete( detail ) {\n            \n            var path = paths[ bookmark - 1 ];\n            path.classList.remove( \"running\" );\n            if ( detail.err ) {\n                \n                recordOutcome( \"path \" + bookmark + \" error: \" + detail.err );\n                path.classList.add( \"error\" );\n                \n            } else {\n                \n                path.classList.add( \"success\" );\n                \n            }\n            setTimeout( nextPath, 1000 );\n            \n        }\n        \n        function scriptComplete() {\n            \n            bus.removeListener( \"path-complete\", pathComplete );\n            script.end = Date.now();\n            bus.emit( \"script-complete\", script );\n            notify( \"Script run complete\" );\n            var stopper = document.querySelector( \"#stop\" );\n            if ( !stopper.checked ) {\n                \n                window.location.replace( nextIterationURL );\n                \n            } else {\n                \n                document.body.classList.add( \"paused\" );\n                \n            }\n            \n        }\n            \n        if ( paths.length < 1 ) { \n            \n            recordOutcome( \"No paths to run\" );\n            \n        } else {\n        \n            script.start = Date.now();\n            bus.on( \"path-complete\", pathComplete );\n            nextPath();\n            \n        }\n    \n    } );\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/script-run-page.js","export default function( ns ) {\n    \n    const { bus } = ns;\n    window.addEventListener( \"DOMContentLoaded\", () => {\n\n        if( !document.body.classList.contains( \"step-page\" ) ) { return; }\n        bus.on( \"fetch-result\", detail => {\n\n            document.querySelector( \"#code\" ).innerHTML = detail.script;\n            document.querySelector( \"#outcome\" ).innerHTML = \"Running...\";\n            bus.emit( \"run-step\", detail );\n    \n        } );\n\n        bus.on( \"step-complete\", detail => {\n            \n            document.querySelector( \"#outcome\" ).innerHTML = \"Complete.\";\n            if ( detail.err ) {\n    \n                document.querySelector( \"#outcome\" ).innerHTML += \" \" + detail.err;\n                \n            } \n            \n        } );\n        \n    } );\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/enrichers/browser/step-page.js","export default function( ns ) {\n    \n    const { bus } = ns;\n    const recordMetric = metricType => detail => {\n\n        detail = JSON.parse( JSON.stringify( detail ) );\n        if ( detail.err ) { detail.err = detail.err.stack; }\n        var metric = { type: metricType, detail: detail };\n        window.navigator.sendBeacon( \"/metrics\", JSON.stringify( metric ) );        \n\n    };\n    bus.on( \"step-complete\", recordMetric( \"step\" ) );\n    bus.on( \"path-complete\", recordMetric( \"path\" ) );\n    bus.on( \"script-complete\", recordMetric( \"script\" ) );\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/listeners/browser/metrics-sink.js","function displayNotification( message, isError ) {\n    \n    const infoBlock = document.createElement( \"li\" );\n    const timeBlock = document.createElement( \"time\" );\n    const messageBlock = document.createElement( \"div\" );\n    \n    messageBlock.innerHTML = message;\n    timeBlock.innerHTML = new Date().toLocaleDateString();\n    infoBlock.className = isError ? \"error\" : \"\";\n    infoBlock.appendChild( timeBlock );\n    infoBlock.appendChild( messageBlock );\n    infoBlock.classList.add( \"goes\" );\n    document.querySelector( \".infos\" ).appendChild( infoBlock );\n    setTimeout( () => {\n        \n        infoBlock.classList.add( \"going\" );\n        setTimeout( () => infoBlock.remove(), 500 );\n        \n    }, 5000 );\n    \n}\n\nfunction displayErrorNotification( message ) { \n    \n    displayNotification( message.stack || message, true );\n    \n}\n\nexport default function( ns ) {\n    \n    const { bus } = ns;\n    bus.on( \"fetch-error\", displayErrorNotification );\n    bus.on( \"agent-error\", displayErrorNotification );\n    bus.on( \"info-message\", displayNotification );\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/listeners/browser/notifications.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 11\n// module chunks = 0","import \"./browser-polyfills\";\nimport \"./browser-enhancements\";\n\nimport app from \"./app\";\n\nimport ajaxFormSubmit from \"./enrichers/browser/ajax-form-submit\";\nimport stepPage from \"./enrichers/browser/step-page\";\nimport scriptRunPage from \"./enrichers/browser/script-run-page\";\nimport embeddedBrowserWidget from \"./enrichers/browser/embedded-browser-widget\";\nimport pathRunner from \"./enrichers/browser/path-runner\";\nimport pathPage from \"./enrichers/browser/path-page\";\n\nimport notifications from \"./listeners/browser/notifications\";\nimport metricsSink from \"./listeners/browser/metrics-sink\";\n\nconst ns = window.formicido = window.formicido || {};\n\n[ \n    app, // must be first\n    notifications, \n    metricsSink,\n    ajaxFormSubmit, \n    embeddedBrowserWidget, \n    stepPage, \n    scriptRunPage,\n    pathPage,\n    pathRunner\n\n].forEach( module => module( ns ) );\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/browser.js"],"sourceRoot":""}