!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function o(e){e.bus=new u.default,e.uuid=i,e.notify=function(t){return e.bus.emit("info-message",t)}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),u=r(s);t.default=o},function(e,t,n){"use strict";document.addEventListener("click",function(e){if(e.target&&e.target.classList.contains("clear-button")){var t=document.querySelectorAll(e.target.getAttribute("data-selectors"));t.forEach(function(e){e.innerHTML&&(e.innerHTML=""),e.value&&(e.value="")})}}),document.addEventListener("click",function(e){if("BUTTON"===e.target.tagName&&e.target.classList.contains("redirect-form")){var t=e.target.closest("form");if(t){var n=t.action;t.action=e.target.value,setTimeout(function(){t.action=n},100)}}})},function(e,t,n){"use strict";window.Element&&!window.Element.prototype.closest&&(window.Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do for(t=n.length;--t>=0&&n.item(t)!==r;);while(t<0&&(r=r.parentElement));return r})},function(e,t,n){"use strict";function r(e){function t(e){var t={};[].slice.call(e.elements,0).forEach(function(e){var n=e.name;if(n){var r=t[n]=t[n]||[];r.push(e.value)}});var r=e.action||window.location.toString(),i={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}};window.fetch(r,i).then(function(e){if(!e.ok)return e.text().then(function(t){throw new Error("Fetch failed with "+e.status+": "+t)},function(t){throw new Error("Fetch failed with "+e.status+": "+t.message)});var t=!!~e.headers.get("content-type").indexOf("text/html");return t?void(window.location.href=e.url):e.json().then(function(e){return n.emit("fetch-result",e)})}).catch(function(e){return n.emit("fetch-error",e.message)})}var n=e.bus;document.addEventListener("submit",function(e){e.target.classList.contains("via-ajax")&&(e.preventDefault(),t(e.target))}),document.addEventListener("ajax-submit",function(e){return t(e.detail)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){function t(e,t){var n=document.querySelector("#embedded-browser");return new Promise(function(u,c){var a=i(),l=!0,d=function e(t){if(t&&t.data&&t.data.cid===a&&(r.removeListener("agent-response",e),l)){l=!1,s&&o("Reply to: "+a);var n=t.data,i=[].concat(n.args||[]);n.isSuccess?u.apply(null,i):c.apply(null,i)}};r.on("agent-response",d),s&&o("Remoting: "+a),n.contentWindow.postMessage({cid:a,js:e},"*"),setTimeout(function(){l&&(l=!1,s&&o("Timed out: "+a),r.removeListener("agent-response",d),c(new Error("Timed out")))},t||5e3)})}function n(e,t,n){return new Promise(function(r,i){function u(){n().catch(function(e){return console.log(e),!1}).then(function(t){c&&(t?(r(),c=!1):(s&&o("Scheduling another poll"),setTimeout(u,e)))})}var c=!0;setTimeout(u,e),setTimeout(function(){c&&(c=!1,i("Polling timed out: "+n))},t)})}var r=e.bus,i=e.uuid,o=e.notify;document.addEventListener("submit",function(e){if("embedded-browser-controls"===e.target.id){e.preventDefault(),e.stopPropagation();var t=e.target.location.value;document.querySelector("#embedded-browser").src=t}}),window.addEventListener("message",function(e){if(e.data&&e.data.args&&"agent-response"===e.data.type){var t={origin:e.origin,data:e.data};r.emit("agent-response",t)}});var s=!1;r.on("run-step",function(e){s=!!e.debug;var i=document.querySelector("#embedded-browser");if(i){var o=Object.keys(e.args||{}),u=["frame","remote","poll"].concat(o).concat(e.script),c=Function.apply(null,u),a=o.map(function(t){return e.args[t]}),l=Date.now();Promise.resolve().then(function(){return c.apply(null,[i,t,n].concat(a))}).then(function(){return null},function(e){return e}).then(function(t){return{detail:e,err:t,start:l,end:Date.now()}}).then(function(e){return r.emit("step-complete",e)})}else console.warn("No embedded browser")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.bus;window.addEventListener("DOMContentLoaded",function(){document.body.classList.contains("path-page")&&t.on("fetch-result",function(e){t.emit("run-path",e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){function t(e){i&&(i.innerHTML+="<br />"+e)}var i=document.querySelector("#outcome");i.innerHTML="";var o=document.querySelector("#transcript");o.innerHTML="";var s=e.stepScripts,u=e.id;if(s&&s.length){var c=function(){f<d.length?(d[f].classList.add("running"),n.once("step-complete",a),n.emit("run-step",s[f]),f++):l()},a=function(e){var n=d[f-1];n.classList.remove("running"),e.err?(t("Step "+f+" error: "+e.err),n.classList.add("error")):n.classList.add("success"),c()},l=function(){var e=Date.now(),t={path:s,id:u,start:p,end:e};r("Path run complete"),n.emit("path-complete",t)},d=s.map(function(e){var t=document.createElement("li");return t.innerHTML=e.description,o.appendChild(t),t}),f=0,p=Date.now();c()}else t("Done. No steps specified."),r("No steps specified")}var n=e.bus,r=e.notify;n.on("run-path",t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.bus,n=e.notify;t.on("initiate-script",function(e){function r(e){a&&(a.innerHTML+="<br />"+e)}function i(){d<f.length?(f[d].classList.add("running"),t.emit("run-path",u[d]),d++):s()}function o(e){var t=f[d-1];t.classList.remove("running"),e.err?(r("path "+d+" error: "+e.err),t.classList.add("error")):t.classList.add("success"),setTimeout(i,1e3)}function s(){t.removeListener("path-complete",o),e.end=Date.now(),t.emit("script-complete",e),n("Script run complete");var r=document.querySelector("#stop");r.checked?document.body.classList.add("paused"):window.location.replace(c)}var u=e.pathScripts,c=e.nextIterationURL,a=document.querySelector("#script-outcome");a.innerHTML="";var l=document.querySelector("#script-transcript"),d=0,f=u.map(function(e){var t=document.createElement("li");return t.innerHTML=e.name,l.appendChild(t),t});f.length<1?r("No paths to run"):(e.start=Date.now(),t.on("path-complete",o),i())})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.bus;window.addEventListener("DOMContentLoaded",function(){document.body.classList.contains("step-page")&&(t.on("fetch-result",function(e){document.querySelector("#code").innerHTML=e.script,document.querySelector("#outcome").innerHTML="Running...",t.emit("run-step",e)}),t.on("step-complete",function(e){document.querySelector("#outcome").innerHTML="Complete.",e.err&&(document.querySelector("#outcome").innerHTML+=" "+e.err)}))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.bus,n=function(e){return function(t){t=JSON.parse(JSON.stringify(t)),t.err&&(t.err=t.err.stack);var n={type:e,detail:t};window.navigator.sendBeacon("/metrics",JSON.stringify(n))}};t.on("step-complete",n("step")),t.on("path-complete",n("path")),t.on("script-complete",n("script"))}},function(e,t,n){"use strict";function r(e,t){var n=document.createElement("li"),r=document.createElement("time"),i=document.createElement("div");i.innerHTML=e,r.innerHTML=(new Date).toLocaleDateString(),n.className=t?"error":"",n.appendChild(r),n.appendChild(i),n.classList.add("goes"),document.querySelector(".infos").appendChild(n),setTimeout(function(){n.classList.add("going"),setTimeout(function(){return n.remove()},500)},5e3)}function i(e){r(e.stack||e,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.bus;t.on("fetch-error",i),t.on("agent-error",i),t.on("info-message",r)}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),a=n.slice(),i=a.length,c=0;c<i;c++)a[c].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(2),n(1);var i=n(0),o=r(i),s=n(3),u=r(s),c=n(8),a=r(c),l=n(7),d=r(l),f=n(4),p=r(f),h=n(6),m=r(h),v=n(5),y=r(v),g=n(10),_=r(g),L=n(9),w=r(L),b=window.formicido=window.formicido||{};[o.default,_.default,w.default,u.default,p.default,a.default,d.default,y.default,m.default].forEach(function(e){return e(b)})}]);
//# sourceMappingURL=bundle.js.map